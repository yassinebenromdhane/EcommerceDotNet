@page
@model WebAppTest.Pages.ClientModel
@{
    ViewData["Title"] = "Client page";
}

<div class="text-center">
    @Model.Customers.Count()
    <h1 class="display-4">Welcome Client</h1>
    <table class="table">
        <thead>
            <tr>
                <td class="col">Name</td>
                <td class="col">Last Name</td>
                <td class="col">Phone</td>
                <td colspan="4" class="col">Nb Orders</td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td >Rejected</td>
                <td >Pending</td>
                <td >Processing</td>
                <td >Completed</td>
            </tr>

        </thead>
    @foreach (var customer in Model.Customers)
    {
      
        <tr>
            <td>
                    @customer.FirstName
            </td>
            <td>
                    @customer.LastName
            </td>
            <td>
                    @customer.Phone
            </td>
                @{
                    int pending = 0;
                    int rejected = 0;
                    int processing = 0;
                    int completed = 0;
                }
                @foreach (var ord in customer.Orders)
                {
                    if(ord.OrderStatus == 1)
                    {
                        rejected++;
                        
                    }else if(ord.OrderStatus == 2)
                    {
                        pending++;
                    }else if(ord.OrderStatus == 3)
                    {
                        processing++;
                    }else
                    {
                        completed++;
                    }
                    
                }
                
            <td> @rejected</td>
            <td> @pending</td>
            <td> @processing</td>
            <td> @completed</td>

        </tr>
        
    }
    </table>
</div>
